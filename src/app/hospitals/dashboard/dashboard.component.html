<div *ngIf="!isLoader">
  <div class="row">
    <!-- Column -->
    <div class="col-lg-3 col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="d-flex no-block">
            <div class="round align-self-center round-success">
              <i class="fa fa-flask"></i>
            </div>
            <div class="m-l-10 align-self-center">
              <h3 class="m-b-0">{{ apppointmentCount }}</h3>
              <h5 class="text-muted m-b-0">Scheduled Appointments</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column -->
    <!-- Column -->
    <div class="col-lg-2 col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="d-flex no-block">
            <div class="round align-self-center round-info">
              <i class="fa fa-user-md"></i>
            </div>
            <div class="m-l-10 align-self-center">
              <h3 class="m-b-0">{{ doctorCount }}</h3>
              <h5 class="text-muted m-b-0">Doctors</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column -->
    <!-- Column -->
    <div class="col-lg-2 col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="d-flex no-block">
            <div class="round align-self-center round-danger">
              <i class="fa fa-users"></i>
            </div>
            <div class="m-l-10 align-self-center">
              <h3 class="m-b-0">{{ patientCount }}</h3>
              <h5 class="text-muted m-b-0">Patients</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column -->
    <!-- Column -->
    <div class="col-lg-2 col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="d-flex no-block">
            <div class="round align-self-center round-success">
              <i class="fa fa-calendar"></i>
            </div>
            <div class="m-l-10 align-self-center">
              <h3 class="m-b-0">{{ pharmacistsCount }}</h3>
              <h5 class="text-muted m-b-0">Pharmacists</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column -->
    <!-- Column -->
    <div class="col-lg-3 col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="d-flex no-block">
            <div class="round align-self-center round-success">
              <i class="fa fa-calendar"></i>
            </div>
            <div class="m-l-10 align-self-center">
              <h3 class="m-b-0">{{ labAttendantCount }}</h3>
              <h5 class="text-muted m-b-0">Lab Scientists</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Column -->
  </div>
  <!-- Row -->
  <!-- .row -->
  <div class="row">
    <div class="col-md-4 col-sm-12 col-xs-12">
      <div *ngIf="isAppointmentChartLoaded" class="card">
        <div class="card-body">
          <h5 class="card-title">
            <small class="float-right text-success">
              <!-- <i class="fa fa-sort-asc"></i> --> </small
            >Appointments
          </h5>
        </div>
        <div style="display: block">
          <div id="chart-container">
            <canvas
              #myCanvas
              id="canvas"
              baseChart
              [chartType]="chartType"
              [datasets]="appointmentChartData"
              [labels]="chartLabels"
              [colors]="chartColors1"
              [options]="chartOptions"
            ></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4 col-sm-12 col-xs-12">
      <div *ngIf="isPatientChartLoaded" class="card">
        <div class="card-body">
          <h5 class="card-title">
            <small class="float-right text-success">
              <!-- <i class="fa fa-sort-asc"></i> --> </small
            >Patients
          </h5>
        </div>
        <div style="display: block">
          <div id="chart-container">
            <canvas
              #myCanvas
              id="canvas"
              baseChart
              [chartType]="chartType"
              [datasets]="patientChartData"
              [labels]="chartLabels"
              [colors]="chartColors2"
              [options]="chartOptions"
            ></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-sm-12 col-xs-12">
      <div *ngIf="isPaymentChartLoaded" class="card">
        <div class="card-body">
          <h5 class="card-title">
            <small class="float-right text-danger">
              <!-- <i class="fa fa-sort-desc"></i> --> </small
            >Payments
          </h5>
        </div>
        <div style="display: block">
          <div id="chart-container">
            <canvas
              #myCanvas
              id="canvas"
              baseChart
              chartType="bar"
              [datasets]="paymentChartData"
              [labels]="chartLabels"
              [colors]="chartColors"
              [options]="chartOptions"
            ></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /.row -->
  <!--row -->
  <!-- <div class="row">
    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Patients In</h5>
                <ul class="list-inline text-center">
                    <li>
                        <h5><i class="fa fa-circle m-r-5" style="color: #00bfc7;"></i>OPD</h5>
                    </li>
                    <li>
                        <h5><i class="fa fa-circle m-r-5" style="color: #b4becb;"></i>ICU</h5>
                    </li>
                </ul>

  <div>
    <div style="display: block">
      <canvas baseChart
              [datasets]="barChartData"
              [labels]="mbarChartLabels"
              [options]="barChartOptions"
              [colors]="barChartColors"
              [legend]="barChartLegend"
              [chartType]="barChartType"
              (chartHover)="chartHovered($event)"
              (chartClick)="chartClicked($event)"></canvas>
    </div>


  </div>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Hospital Earning</h5>
                <ul class="list-inline text-center">
                    <li>
                        <h5><i class="fa fa-circle m-r-5" style="color: #00bfc7;"></i>OPD</h5>
                    </li>
                    <li>
                        <h5><i class="fa fa-circle m-r-5" style="color: #b4becb;"></i>ICU</h5>
                    </li>
                </ul>
  <div>
    <div style="display: block">
      <canvas baseChart
              [datasets]="barChartData"
              [labels]="mbarChartLabels"
              [options]="barChartOptions"
              [colors]="barChartColors"
              [legend]="barChartLegend"
              [chartType]="barChartType"
              (chartHover)="chartHovered($event)"
              (chartClick)="chartClicked($event)"></canvas>
    </div>


  </div>
            </div>
        </div>
    </div>
</div> -->
  <!-- row -->
  <!-- /row -->
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title m-b-0">New Patients List</h5>
          <p class="text-muted">Recent Patients added</p>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Name</th>
                  <th>State</th>
                  <th>Medfest ID</th>
                  <th>Phone</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let h of patients; let i = index"
                  (click)="gotoPatientProfile(h._id)"
                >
                  <td>{{ i + 1 }}</td>
                  <td>{{ h.name }}</td>
                  <td>{{ h.state }}</td>
                  <td>{{ h.username }}</td>
                  <td>{{ h.phone }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- bar graph -->
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title m-b-0">Payments</h5>
          <p class="text-muted">Recent Payments in this month</p>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr role="row">
                  <th
                    class="sorting_asc"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-sort="ascending"
                    aria-label="No: activate to sort column descending"
                    style="width: 61px"
                  >
                    No
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Patient: activate to sort column ascending"
                    style="width: 202px"
                  >
                    Patient
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Doctor: activate to sort column ascending"
                    style="width: 166px"
                  >
                    Doctor
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Date: activate to sort column ascending"
                    style="width: 119px"
                  >
                    Date
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Charges: activate to sort column ascending"
                    style="width: 130px"
                  >
                    Charges
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Discount: activate to sort column ascending"
                    style="width: 134px"
                  >
                    Discount
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Total: activate to sort column ascending"
                    style="width: 89px"
                  >
                    Total
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let items of billsList; let i = index"
                  (click)="onClick(items._id)"
                  role="row"
                  class="odd"
                >
                  <td class="sorting_1">{{ i + page * limit + 1 }}</td>
                  <td>{{ items?.patient.name }}</td>
                  <td>{{ items?.doctor.name }}</td>
                  <td>{{ items?.createdAt | date : "d/MMM/y" }}</td>
                  <td>{{ getSubTotal(i) | currency : "&#8358;" }}</td>
                  <td>{{ items?.discount }}%</td>
                  <td>{{ applyDiscount(i) | currency : "&#8358;" }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- patients outstanding payments -->
  <!-- bar graph -->
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title m-b-0">Oustanding Payments</h5>
          <p class="text-muted">Recent Outstanding Payments</p>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr role="row">
                  <th
                    class="sorting_asc"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-sort="ascending"
                    aria-label="No: activate to sort column descending"
                    style="width: 61px"
                  >
                    No
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Patient: activate to sort column ascending"
                    style="width: 202px"
                  >
                    Patient
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Doctor: activate to sort column ascending"
                    style="width: 166px"
                  >
                    Doctor
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Date: activate to sort column ascending"
                    style="width: 119px"
                  >
                    Date
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Charges: activate to sort column ascending"
                    style="width: 130px"
                  >
                    Charges
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Discount: activate to sort column ascending"
                    style="width: 134px"
                  >
                    Discount
                  </th>
                  <th
                    class="sorting"
                    tabindex="0"
                    aria-controls="myTable"
                    rowspan="1"
                    colspan="1"
                    aria-label="Total: activate to sort column ascending"
                    style="width: 89px"
                  >
                    Total
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let items of outstandingPayments; let i = index"
                  (click)="onClick(items._id)"
                  role="row"
                  class="odd"
                >
                  <td class="sorting_1">{{ i + page * limit + 1 }}</td>
                  <td>{{ items?.patient.name }}</td>
                  <td>{{ items?.doctor.name }}</td>
                  <td>{{ items?.createdAt | date : "d/MMM/y" }}</td>
                  <td>{{ getSubTotal(i) | currency : "&#8358;" }}</td>
                  <td>{{ items?.discount }}%</td>
                  <td>{{ applyDiscount(i) | currency : "&#8358;" }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- first time this year -->
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title m-b-0">Recent Patients</h5>
          <p class="text-muted">Recent Patients coming for the first time this year</p>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Name</th>
                  <th>State</th>
                  <th>Medfest ID</th>
                  <th>Phone</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let h of firstTimePatients; let i = index"
                  (click)="gotoPatientProfile(h._id)"
                >
                  <td>{{ i + 1 }}</td>
                  <td>{{ h.name }}</td>
                  <td>{{ h.state }}</td>
                  <td>{{ h.username }}</td>
                  <td>{{ h.phone }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<loader *ngIf="isLoader"></loader>
