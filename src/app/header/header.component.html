<header class="topbar">
    <nav class="navbar top-navbar navbar-expand-md navbar-dark">
        <!-- ============================================================== -->
        <!-- Logo -->
        <!-- ============================================================== -->
        <div class="navbar-header">
            <a class="navbar-brand" href="javascript:void(0)">
                <!-- Logo icon --><b>
                    <!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
                    <!-- Dark Logo icon -->
                    <!-- <h3>M</h3> -->
                    <img src="../assets/logo.png" alt="" height="40" width="50">
                    <!-- Light Logo icon -->

                </b>
                <!--End Logo icon -->
                <span *ngIf="isCollapse" class="hidden-xs">Med<span class="font-bold">Fest</span></span>
            </a>
        </div>
        <!-- ============================================================== -->
        <!-- End Logo -->
        <!-- ============================================================== -->
        <div class="navbar-collapse align-items-md-center">
            <!-- ============================================================== -->
            <!-- toggle and nav items -->
            <!-- ============================================================== -->
            <ul class="navbar-nav mr-auto">

                <!-- This is  -->
                <li class="nav-item"> <a (click)="collapse()"
                        class="nav-link nav-toggler d-block d-md-none waves-effect waves-dark"
                        href="javascript:void(0)"><i class="fa fa-bars"></i></a> </li>
                <li class="nav-item"> <a (click)="collapse()"
                        class="nav-link sidebartoggler d-none d-lg-block d-md-block waves-effect waves-dark"
                        href="javascript:void(0)"><i class="fa fa-bars"></i></a> </li>
                <!-- ============================================================== -->
                <!-- Search -->
                <!-- ============================================================== -->
                <li class="nav-item">
                    <div ngbDropdown class="app-search">
                        <input type="text" ngbDropdownToggle class="form-control" (focus)="searchUser()"
                            (keyup)="searchUser()" placeholder="Search & enter" [(ngModel)]="userSearchQuery">
                            <i class="fas fa-search"></i>
                        <div class="dropdown-menu" ngbDropdownMenu *ngIf="users.length > 0 && userSearchQuery !== ''">
                            <a class="dropdown-item" (click)="selectUser(item)" ngbDropdownItem
                                *ngFor="let item of users">{{item.username}} -- {{item.name}}</a>

                        </div>
                    </div>
                </li>
            </ul>
            <!-- ============================================================== -->
            <!-- User profile and search -->
            <!-- ============================================================== -->
            <ul class="navbar-nav my-lg-0 align-items-center">
                <!-- ============================================================== -->
                <!-- Comment -->
                <!-- ============================================================== -->
                <li class="nav-item dropdown" ngbDropdown [autoClose]=true>
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" ngbDropdownToggle data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false"> <i class="fas fa-clipboard"></i>
                        <div *ngIf="isUnreadNotifiocation()" class="notify"> <span class="heartbit"></span> <span
                                class="point"></span> </div>
                    </a>
                    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right mailbox animated bounceInDown">
                        <ul>
                            <li>
                                <div class="drop-title">Notifications</div>
                            </li>
                            <li>
                                <div class="message-center" *ngIf="userNotifications?.length == 0">
                                    No Notifications
                                </div>
                                <div class="message-center" *ngIf="userNotifications?.length >0">
                                    <!-- Message -->
                                    <a *ngFor="let noti of userNotifications"
                                        (click)='goToNotification(noti?._id,noti?.category,noti?.naviagteUrl )'
                                        href="javascript:void(0)" class="">

                                        <div *ngIf="noti?.category === 6" class="user-img"> <img
                                                src='../../assets/images/users/user.jpg' alt="user" class="img-circle">
                                            <span class="profile-status online pull-right"></span>
                                        </div>
                                        <div *ngIf="noti?.category === 6" class="mail-contnet">
                                            <h5> Hospital Request </h5> <span class="mail-desc">
                                                {{noti?.description}} </span> <span class="time">
                                                {{noti?.date |date :'short'}} </span>
                                        </div>
                                        <div *ngIf="noti?.category !== 6" class="user-img"> <img
                                                [src]='noti?.createdBy?.image| imageSrc' alt="user" class="img-circle">
                                            <span class="profile-status online pull-right"></span>
                                        </div>
                                        <div *ngIf="noti?.category !== 6" class="mail-contnet">
                                            <h5> {{noti?.createdBy?.name}} </h5> <span class="mail-desc">
                                                {{noti?.description}} </span> <span class="time">
                                                {{noti?.createdAt |date :'short'}} </span>
                                        </div>
                                    </a>

                                </div>
                            </li>
                            <!-- <li>
                                <a class="nav-link text-center link"> <strong>Check all notifications</strong> <i
                                        class="fa fa-angle-right"></i> </a>
                            </li> -->
                        </ul>
                    </div>
                </li>
                <!-- ============================================================== -->
                <!-- End Comment -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Messages -->
                <!-- ============================================================== -->
                <li *ngIf="showMessagesButton()" ngbDropdown class="nav-item dropdown">
                    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false"> <i class="fa fa-envelope"></i>
                        <div *ngIf="isUnreadMessage()" class="notify"> <span class="heartbit"></span> <span
                                class="point"></span> </div>
                    </a>
                    <div ngbDropdownMenu class="dropdown-menu mailbox dropdown-menu-right animated bounceInDown"
                        aria-labelledby="2">
                        <ul>
                            <!-- <li>
                                <div class="drop-title">You have 4 new messages</div>
                            </li> -->
                            <li>
                                <div class="message-center" *ngIf="userMessages?.length == 0">
                                    No Messages
                                </div>
                                <div *ngIf="userMessages?.length >0" class="message-center">
                                    <!-- Message -->
                                    <a *ngFor="let msg of userMessages" (click)='markReadMessage(msg?._id);gotoChat()'
                                        href="javascript:void(0)">
                                        <div class="user-img"> <img [src]='msg?.createdBy?.image| imageSrc' alt="user"
                                                class="img-circle"> <span
                                                class="profile-status online pull-right"></span> </div>
                                        <div class="mail-contnet">
                                            <h5> {{msg?.createdBy?.name}} </h5> <span class="mail-desc">
                                                {{msg?.message}} </span> <span class="time">
                                                {{msg?.date |date :'short'}} </span>
                                        </div>
                                    </a>

                                </div>
                            </li>
                            <li>
                                <a (click)='gotoChat()' href="javascript:void(0)" class="nav-link text-center link">
                                    <strong>See all Messages</strong> <i class="fa fa-angle-right"></i> </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <!-- ============================================================== -->
                <!-- End Messages -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- mega menu -->
                <!-- ============================================================== -->

                <!-- ============================================================== -->
                <!-- End mega menu -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- User Profile -->
                <!-- ============================================================== -->
                <li ngbDropdown class="nav-item dropdown u-pro">
                    <div class="d-flex align-items-center">
                        <div ngbDropdownToggle class="profile-img dropdown-toggle"><img [src]="imageSrc" alt="user"
                                class="rounded-circle"></div>
                        <a ngbDropdownToggle class="nav-link dropdown-toggle d-flex waves-effect waves-dark profile-pic"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="hidden-md-down pl-2">{{user.name}} &nbsp;<i
                                    class="fa fa-angle-down"></i></span> </a>
                        <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right animated flipInY">
                            <!-- text-->
                            <!-- <a href="javascript:void(0)" class="dropdown-item"><i class="ti-user"></i> My Profile</a> -->
                            <!-- text-->
                            <!-- <a href="javascript:void(0)" class="dropdown-item"><i class="ti-wallet"></i> My Balance</a> -->
                            <!-- text-->
                            <!-- <a href="javascript:void(0)" class="dropdown-item"><i class="ti-email"></i> Inbox</a> -->
                            <!-- text-->
                            <div class="dropdown-divider"></div>
                            <!-- text-->

                            <a href="javascript:void(0)" (click)="goToProfile()" class="dropdown-item"><i
                                    class="fa fa-user"></i> Profile</a>
                            <!-- text-->
                            <div class="dropdown-divider"></div>
                            <!-- text-->
                            <a href="javascript:void(0)" class="dropdown-item" (click)="logout()"><i
                                    class="fa fa-power-off"></i> Logout</a>
                            <!-- text-->
                        </div>
                    </div>
                </li>
                <!-- ============================================================== -->
                <!-- End User Profile -->
                <!-- ============================================================== -->
                <!-- <li class="nav-item right-side-toggle"> <a class="nav-link  waves-effect waves-light" ><i class="fa fa-cog"></i></a></li> -->
            </ul>
        </div>
    </nav>
</header>
